# My Goals API üíª

My Goals API is designed to help users manage their personal goals by allowing them to register, create, and track their goals with ease.

## üíª Technologies
- Java
- Spring Boot
- Spring Web
- Spring Data JPA
- Lombok
- Spring Security
- JWT
- Flyway
- MySQL
- OpenAPI
- Spring Boot DevTools
- Validation

## üöÄ Getting Started

### Prerequisites
- Java JDK 11 or later
- MySQL
- Maven

### Cloning
To clone your project, run the following command:

```bash
git clone https://github.com/Athosmfr/myGoalsAPI.git
```

### Configuring the Database
Set up your MySQL database and update the application.properties file with your database credentials:

```bash
spring.datasource.url=jdbc:mysql://localhost:3306/my_goals_api
spring.datasource.username=your_username
spring.datasource.password=your_password
```

### Configuring the Secret Key
Set up your secret key on the application.properties file for security reasons:

```bash
api.security.token.secret = "your-secret-key"
```

### Starting
To start your project, navigate to the project directory and run:

```bash
mvn spring-boot:run
```

## üìç API Endpoints

Here are the main routes of your API:

| Route               | Description                                  |
|---------------------|----------------------------------------------|
| `POST /user/create` | Registers a new user.                        |
| `POST /login`       | Authenticates a user and returns a JWT.      |
| `POST /goal/create` | Creates a new personal goal.                 |
| `GET /goal/goals`   | Retrieves all goals for the authenticated user. |
| `GET /goal/goals/{id}`| Retrieves a specific goal by ID.           |
| `PUT /goal/update`  | Updates a specific goal by ID.               |
| `DELETE /goal/delete/{id}` | Deletes a specific goal by ID.        |
| `GET /user/info`    | Retrieves the user's info.                   |
| `PUT /user/update`  | Updates the user account info.               |
| `DELETE /user/delete` | Deletes the user account.                  |

## Example Requests
### Register a new user:

```json
{
  "username": "athosmfr",
  "name": "Athos",
  "email": "athos.mfrodrigues@gmail.com",
  "password": "12345678",
  "sex": "MAN",
  "birthDate": "1998-09-05T04:02:29.073Z"
}
```

### Login:

```json
{
  "email": "athos.mfrodrigues@gmail.com",
  "password": "12345678"
}
```

### Response: 

```json
{
  "token" : "OwoMRHsaQwyAgVoc3OXmL1JhMVUYXGGBbCTK0GBgiYitwQwjf0gVoBmkbuyy0pSi"
}
```

After submitting the login form, you will receive the token string in the response body if you are using Insomnia or Postman. Be sure to copy the token for future use.

### Create a new goal:

Before creating the JSON form, ensure that you include the token in the Authorization header. To do this, create a header named "Authorization" and paste the copied token into the value field.

```json
{
  "title": "Create a Goal",
  "description": "Something to write about",
  "startDate": "2024-04-17T04:10:45.890Z",
  "endDate": "2024-09-17T04:10:45.890Z",
  "status": "CREATED"
}
```

## üîí Security and Testing

This API implements security features using tokens. Most of the created methods require the authentication token generated by the user, ensuring that only the logged-in user can access their own data and not anyone else's.

Additionally, the API includes Swagger for API documentation, accessible at [http://localhost:8080/swagger-ui/index.html#](http://localhost:8080/swagger-ui/index.html#), although it is currently experiencing issues.

Automated tests have also been created for the application using the following technologies:
- **Spring Boot Test** for integration testing.
- **MockMvc** for simulating HTTP requests in tests.
- **Jackson Testers** for handling JSON serialization and deserialization.

These tools ensure that the API behaves as expected and helps maintain code quality.

